<?php require_once __DIR__ . '/../src/db.php'; session_start(); if(empty($_SESSION['admin_id'])){ header('Location: login.php'); exit; } if($_SERVER['REQUEST_METHOD']==='POST' && !empty($_POST['update_status'])){ $id=(int)$_POST['interest_id']; $status=$_POST['status']; $pdo->prepare('UPDATE interests SET status = ? WHERE id = ?')->execute([$status,$id]); header('Location: interests.php'); exit; } $ints = $pdo->query('SELECT i.*, su.name AS sender_name, ru.name AS receiver_name FROM interests i JOIN users su ON su.id = i.sender_id JOIN users ru ON ru.id = i.receiver_id ORDER BY i.created_at DESC')->fetchAll(); ?><!doctype html><html><head><meta charset="utf-8"><title>Interests</title></head><body><h1>Interests</h1><p><a href="index.php">Back to Dashboard</a></p><table border="1"><tr><th>ID</th><th>Sender</th><th>Receiver</th><th>Status</th><th>Action</th></tr><?php foreach($ints as $it): ?><tr><td><?php echo $it['id']; ?></td><td><?php echo htmlspecialchars($it['sender_name']); ?></td><td><?php echo htmlspecialchars($it['receiver_name']); ?></td><td><?php echo htmlspecialchars($it['status']); ?></td><td><form method="post" style="display:inline"><input type="hidden" name="interest_id" value="<?php echo $it['id']; ?>"><select name="status"><option>Pending</option><option>Accepted</option><option>Rejected</option></select><button name="update_status">Update</button></form></td></tr><?php endforeach; ?></table></body></html>